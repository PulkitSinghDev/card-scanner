!function(){var i=function(r,f){if(this===window)return new i(r,f);if(r=void 0!==r?r:{prefix:"",suffix:""},r.prefix=void 0!==r.prefix?r.prefix:"",r.suffix=void 0!==r.suffix?r.suffix:"",f=void 0!==f?f:function(i){console.log("Read data from card: "+i)},"function"!=typeof f)return void console.log("Callback must be a function!");var e={recording:!1,calling_back:!1,prefix:r.prefix,suffix:r.suffix,read_string:"",read_prefix:"",read_suffix:""},n=this;return this.keypress=function(i){var r=String.fromCharCode(i.which);e.recording?""!=e.suffix&&e.suffix.charAt(e.read_suffix.length)==r?(e.read_suffix+=r,e.calling_back=e.read_suffix==e.suffix,e.recording=!e.calling_back):(e.calling_back=""==e.suffix&&13==i.which,e.read_string+=e.read_suffix+(13!=i.which?r:""),e.read_suffix=""):e.prefix.charAt(e.read_prefix.length)==r&&(e.read_prefix+=r,e.recording=e.read_prefix==e.prefix),e.calling_back&&(f(e.read_string),e.recording=e.calling_back=!1,e.read_string=e.read_prefix=e.read_suffix="")},window.addEventListener("keypress",function(i){n.keypress(i)}),this};window.CardScannerMonitor||(window.CardScannerMonitor=i)}();
